{"version":3,"sources":["assets\\Script\\src\\base\\JTComponent.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["///<reference path=\"../events/JTEventSignaler.ts\"/>\r\nnamespace com \r\n{\r\n    export abstract class JTComponent<T extends fgui.GComponent> extends JTEventSignaler implements JTIComponent\r\n    {\r\n        protected _____ui:T = null;\r\n        protected ___runClass:any = null;\r\n        protected _url:string = null;\r\n        protected _pacakgeName:string = null;\r\n        protected __classUI:T = null;\r\n        protected __componentId:string = null;\r\n        protected _registeredClick:boolean = false;\r\n        protected __loaded:boolean = false;\r\n        protected __uiPackage:fgui.UIPackage = null;\r\n        constructor()\r\n        {\r\n            super();\r\n        }\r\n\r\n        protected loadAsset(url:string, id:string, runClass?:any, registeredClick:boolean = true):void\r\n        {\r\n            if (this._url == url && url != null)\r\n            {\r\n                info(\"asset already loaded\");\r\n                return;\r\n            }\r\n            this.__loaded = false;\r\n            this._url = url;\r\n            this.__componentId = id;\r\n            this._pacakgeName = this._url.split(\"/\").pop();\r\n            this.___runClass = runClass;\r\n            this._registeredClick = registeredClick;\r\n            this.__uiPackage = fgui.UIPackage.getByName(url);\r\n            if (!this.__uiPackage)   this.load();\r\n            else\r\n            {\r\n                this.loadAssetComplete();\r\n            }\r\n        }\r\n\r\n        public load():void\r\n        {\r\n            fgui.UIPackage.loadPackage(this._url, this.loadAssetComplete.bind(this));\r\n        }\r\n\r\n        protected loadAssetComplete():void\r\n        {\r\n            if (!this.__loaded)\r\n            {\r\n                this.___runClass && this.___runClass.bindAll();\r\n                this.__uiPackage = fgui.UIPackage.addPackage(this._url);\r\n                this._____ui = this.getObject(this.__componentId);\r\n                this._____ui.on(fgui.Event.UNDISPLAY, this.onRemoveFromStage, this)\r\n                JTResizeEvent.registerResize(this);\r\n                JTPopupManager.center(this._____ui);\r\n                if (this._registeredClick)  this._____ui.onClick(this.registerMouseClick, this);\r\n            }\r\n            this.locker.release();\r\n            this.__loaded = true;\r\n            this.notifyComplete();\r\n        }\r\n\r\n        public bindUIRelation(parent:fgui.GComponent, type:number):void\r\n        {\r\n                this.bindRelation(this._____ui, parent, type);\r\n        }\r\n\r\n        public bindRelation(child:fgui.GComponent, parent:fgui.GComponent, type:number):void\r\n        {\r\n                child.setSize(parent.width, parent.height);\r\n                child.addRelation(parent, type);\r\n        }\r\n        public getObject(id:string):T\r\n        {\r\n            let _____ui:T = this.__uiPackage.createObject(id) as T;\r\n            _____ui.setPosition(0, 0);\r\n            return _____ui;\r\n        }\r\n\r\n        protected notifyComplete():void\r\n        {\r\n          \r\n        }\r\n\r\n        protected registerMouseClick(e):void\r\n        {\r\n            var target: fgui.GComponent = e.target[\"$gobj\"]; //cocos 是$gobj Laya是$owner\r\n            var targetName: string = target.name;\r\n            if (!targetName) return;\r\n            this.onMouseClickHandler(target, targetName);\r\n        }\r\n    \r\n        protected onMouseClickHandler(target:fairygui.GComponent, targetName:string):void\r\n        {\r\n    \r\n        }\r\n\r\n        public get className():string\r\n        {\r\n            return this.constructor[\"name\"];\r\n        }\r\n\r\n        public onResizeHandler():void\r\n        {\r\n            // if (!this._____ui) return;\r\n            // JTLayoutManager.update(this);\r\n        }\r\n\r\n        public get componentUI():T\r\n        {\r\n            return this._____ui;\r\n        }\r\n\r\n        public get classUI():T\r\n        {\r\n            return this.__classUI;\r\n        }\r\n\r\n        public get runClass():any\r\n        {\r\n            return this.___runClass;\r\n        }\r\n\r\n        public get locker():JTLocker\r\n        {\r\n            return null;\r\n        }\r\n\r\n        public get uiPackage(): fairygui.UIPackage\r\n        {\r\n            return this.__uiPackage;\r\n        }\r\n\r\n        protected onRemoveFromStage():void\r\n        {\r\n            this._____ui && this._____ui.off(fgui.Event.UNDISPLAY, this.onRemoveFromStage, this);\r\n            if (this._registeredClick) this._____ui && this._____ui.offClick(this.onMouseClickHandler, this);\r\n            this._pacakgeName = this.___runClass = this._url = \r\n            this.__classUI = this.__componentId = this.__uiPackage = this._____ui = null;\r\n            this.recycle();\r\n        }\r\n\r\n    }\r\n}\r\n"]}