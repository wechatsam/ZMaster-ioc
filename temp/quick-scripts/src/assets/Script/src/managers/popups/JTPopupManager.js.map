{"version":3,"sources":["assets\\Script\\src\\managers\\popups\\JTPopupManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\r\nnamespace com \r\n{\r\n    export class JTPopupManager\r\n    {\r\n        private static __locker:JTLocker = null;\r\n        private static __layer:fgui.GComponent = null;\r\n        private static __childs:JTChildPopUp[] = [];\r\n        /**\r\n         * 弹窗蒙板\r\n         */\r\n        private static __backgroundMask:fgui.GGraph = null;\r\n        public static initialize():void\r\n        {\r\n\r\n        }\r\n\r\n        public static createPopUp(__class:any, parent?:fgui.GComponent, \r\n                                isTween:boolean = false, mode:boolean = true):JTIComponent\r\n        {\r\n            let child:JTIComponent = new __class();\r\n            return this.addPopUp(child, parent, isTween, mode) \r\n        }\r\n\r\n        public static centerComponent(component:JTIComponent):void\r\n        {\r\n\r\n        }\r\n\r\n        public static center(componentUI:fgui.GComponent):void\r\n        {\r\n\r\n        }\r\n\r\n        /**\r\n         * \r\n         * @param component \r\n         * @param parent \r\n         * @param isTween \r\n         * @param mode \r\n         * @returns \r\n         */\r\n        public static addPopUp(component:JTIComponent, parent?:fgui.GComponent, isTween:boolean = false, mode:boolean = true):JTIComponent\r\n        {\r\n            parent = parent ? parent : this.layer; //如果没有父容器，则直接使用PopUp的容器\r\n            let childPopUp:JTChildPopUp = this.search(component);\r\n            if (!childPopUp)\r\n            {\r\n                childPopUp = this.pool.get() as JTChildPopUp;\r\n                childPopUp.setup(component, parent, isTween, mode);\r\n                this.__childs.push(childPopUp);\r\n            }\r\n            else\r\n            {\r\n                childPopUp.setup(component, parent, isTween, mode);\r\n            }\r\n            if (!this.__backgroundMask)//由于FraiyGUI graphics 画的接口暴露了cocos的方法，所以可能要使用UI编辑器来画一张图\r\n            {\r\n                this.__backgroundMask = new fgui.GGraph();\r\n                this.__backgroundMask.clearGraphics();\r\n                this.__backgroundMask.setSize(JTSession.stageWidth, JTSession.stageHeight);\r\n                this.__backgroundMask.drawRect(0, null, null, null);\r\n            }\r\n            if (childPopUp.mode)\r\n            {\r\n                    //显示遮挡层\r\n            }\r\n            if (isTween)\r\n            {\r\n\r\n            }\r\n            else\r\n            {\r\n                \r\n            }\r\n            return component;\r\n        }\r\n\r\n        /**\r\n         * \r\n         * @param component \r\n         * @param isTween \r\n         * @returns \r\n         */\r\n        public static removePopUp(component:JTIComponent, isTween:boolean = false):JTIComponent\r\n        {\r\n            let childPopUp:JTChildPopUp = this.removeComponent(component);\r\n            if (!childPopUp) return component;\r\n            if (!isTween)           this.put(childPopUp);\r\n            else\r\n            {\r\n                    //缓动消失逻辑\r\n            }\r\n            return component;\r\n        }\r\n\r\n        /**\r\n         * \r\n         * @param parent \r\n         */\r\n        public static removes(parent?:fairygui.GComponent):void\r\n        {\r\n            let lines:JTChildPopUp[] = null;\r\n            if (parent)\r\n            {\r\n                 lines = this.removeGComponent(parent);\r\n            }\r\n            else\r\n            {\r\n                lines = this.__childs;\r\n            }\r\n            while(lines.length)\r\n            {\r\n                let childPopUp:JTChildPopUp = lines.shift();\r\n                this.put(childPopUp);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * 搜索列表中是否该对象已经弹出了。\r\n         * @param component 需要弹出的显示对象\r\n         * @returns \r\n         */\r\n        private static search(component:JTIComponent):JTChildPopUp\r\n        {\r\n            let count:number = this.__childs.length;\r\n            for (let i:number = 0; i < count; i++)\r\n            {\r\n                let childPopUp:JTChildPopUp = this.__childs[i];\r\n                if (childPopUp.component == component)\r\n                {\r\n                    return childPopUp;\r\n                }\r\n            }\r\n            return null;\r\n        }\r\n\r\n        private static removeGComponent(parent:fgui.GComponent):JTChildPopUp[]\r\n        {\r\n            let lines:JTChildPopUp[] = [];\r\n            for (let i:number = 0; i < this.__childs.length; i++)\r\n            {\r\n                let childPopUp:JTChildPopUp = this.__childs[i];\r\n                if (childPopUp.parent == parent)\r\n                {\r\n                    let lines:JTChildPopUp[] = this.__childs.splice(i, 1);\r\n                    let child:JTChildPopUp = lines.shift();\r\n                    lines.push(child);\r\n                    i--;\r\n                }\r\n            }\r\n            return lines;\r\n        }\r\n\r\n        private static removeComponent(component:JTIComponent):JTChildPopUp\r\n        {\r\n            let count:number = this.__childs.length;\r\n            let child:JTChildPopUp = null;\r\n            for (let i:number = 0; i < count; i++)\r\n            {\r\n                let childPopUp:JTChildPopUp = this.__childs[i];\r\n                if (childPopUp.component == component)\r\n                {\r\n                    let lines:JTChildPopUp[] = this.__childs.splice(i, 1);\r\n                    child = lines.shift();\r\n                }\r\n            }\r\n            return child;\r\n        }\r\n\r\n        public static get layer():fgui.GComponent\r\n        {\r\n            if (!this.__layer)\r\n            {                \r\n                let layerManager:JTAbstractLayerManager = JTApplicationBootstrap.getContext(JTApplicationBootstrap.CONTEXT_LAYER);\r\n                this.__layer = layerManager.getLayer(JTAbstractLayerManager.LAYER_POPUP);\r\n            }\r\n            return this.__layer;\r\n        }\r\n\r\n        private static _pool:JTIPool = null;\r\n        private static create(component:JTIComponent, parent?:fgui.GComponent, isTween:boolean = false, mode:boolean = true):JTChildPopUp\r\n        {\r\n            var childPopUp:JTChildPopUp = this.pool.get() as JTChildPopUp;\r\n            childPopUp.setup(component, parent, isTween, mode);\r\n            return childPopUp;\r\n        }\r\n\r\n        private static put(childPopUp:JTChildPopUp):void\r\n        {\r\n            this.pool.put(childPopUp);\r\n        }\r\n\r\n        protected static get pool():JTIPool\r\n        {\r\n            if(!this._pool)\r\n            {\r\n                this._pool = JTPool.instance(JTChildPopUp);\r\n            }\r\n            return this._pool;\r\n        }\r\n\r\n        public static get locker():JTLocker\r\n        {\r\n            if (!this.__locker)\r\n            {\r\n                this.__locker = new JTLocker();\r\n            }\r\n            return this.__locker;\r\n        }\r\n    }\r\n}\r\n"]}