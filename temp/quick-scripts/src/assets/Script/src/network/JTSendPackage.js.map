{"version":3,"sources":["assets\\Script\\src\\network\\JTSendPackage.ts"],"names":[],"mappings":";;;;;;IACA,IAAU,GAAG,CA2EZ;IA3ED,WAAU,GAAG;QAET;YAAA;gBAEY,aAAQ,GAAU,EAAE,CAAC;gBACrB,UAAK,GAAU,EAAE,CAAC;gBAClB,cAAS,GAAU,CAAC,CAAC;gBACrB,aAAQ,GAAc,IAAI,CAAC;YAmEvC,CAAC;YAjEU,qCAAa,GAApB,UAAqB,QAAe;gBAEhC,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;YAC9B,CAAC;YAEM,6BAAK,GAAZ,UAAa,GAAU,EAAE,KAAY;gBAEjC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;YAC/B,CAAC;YAED,sBAAW,kCAAO;qBAAlB;oBAEI,OAAO,IAAI,CAAC,QAAQ,CAAC;gBACzB,CAAC;;;eAAA;YAED,sBAAW,mCAAQ;qBAAnB;oBAEI,OAAO,IAAI,CAAC,SAAS,CAAC;gBAC1B,CAAC;;;eAAA;YAEM,4BAAI,GAAX;gBAEI,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC;gBACxC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC;gBACtC,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;gBAEhD,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;YAC5B,CAAC;YAEM,6BAAK,GAAZ,UAAa,OAAkB;gBAE3B,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;YAC5B,CAAC;YAEM,+BAAO,GAAd;gBAEI,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;gBACnB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;gBACrB,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;gBACnB,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;YACpB,CAAC;YAED,sBAAkB,qBAAI;qBAAtB;oBAEI,IAAG,CAAC,IAAI,CAAC,KAAK,EACd;wBACI,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;qBAC/C;oBACD,OAAO,IAAI,CAAC,KAAK,CAAC;gBACtB,CAAC;;;eAAA;YAIa,mBAAK,GAAnB,UAAoB,OAAmB;gBAEnC,IAAI,WAAW,GAAiB,IAAI,CAAC,IAAI,CAAC,GAAG,EAAmB,CAAC;gBACjE,IAAI,CAAC,OAAO;oBAAE,OAAO,GAAG,SAAS,CAAC,OAAO,CAAC;gBAC1C,WAAW,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;gBAC3B,OAAO,WAAW,CAAC;YACvB,CAAC;YAEa,iBAAG,GAAjB,UAAkB,WAAyB;gBAEvC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,WAA4B,CAAC,CAAC;YAChD,CAAC;YAbc,mBAAK,GAAW,IAAI,CAAC;YAcxC,oBAAC;SAxED,AAwEC,IAAA;QAxEY,iBAAa,gBAwEzB,CAAA;IACL,CAAC,EA3ES,GAAG,KAAH,GAAG,QA2EZ","file":"","sourceRoot":"/","sourcesContent":[" \r\nnamespace com \r\n{\r\n    export class JTSendPackage implements JTIPoolObject\r\n    {\r\n        private _content:Object = {};\r\n        private _data:Object = {};\r\n        private _protocol:number = 0;\r\n        private _channel:JTIChannel = null;\r\n        \r\n        public writeProtocol(protocol:number):void\r\n        {\r\n            this._protocol = protocol;\r\n        }\r\n\r\n        public write(key:string, value:Object):void\r\n        {\r\n            this._content[key] = value;\r\n        }   \r\n\r\n        public get content():Object\r\n        {\r\n            return this._content;\r\n        }\r\n\r\n        public get protocol():number\r\n        {\r\n            return this._protocol;\r\n        }\r\n\r\n        public send():void\r\n        {\r\n            this._data[\"protocol\"] = this._protocol;\r\n            this._data[\"content\"] = this._content;\r\n            this._channel && this._channel.send(this._data);\r\n\r\n            JTSendPackage.put(this);\r\n        }\r\n\r\n        public setup(channel:JTIChannel):void\r\n        {\r\n            this._channel = channel;\r\n        }\r\n\r\n        public recycle():void\r\n        {\r\n            this._content = {};\r\n            this._channel = null;\r\n            this._protocol = 0;\r\n            this._data = {};\r\n        }\r\n\r\n        public static get pool():JTIPool\r\n        {\r\n            if(!this._pool)\r\n            {\r\n                this._pool = JTPool.instance(JTSendPackage);\r\n            }\r\n            return this._pool;\r\n        }\r\n        \r\n        private static _pool:JTIPool = null;\r\n\r\n        public static begin(channel?:JTIChannel):JTSendPackage\r\n        {\r\n            var sendPackage:JTSendPackage = this.pool.get() as JTSendPackage;\r\n            if (!channel) channel = JTSession.channel; //如果没有传连接通道，直接使用框架默认的连接\r\n            sendPackage.setup(channel);\r\n            return sendPackage;\r\n        }\r\n\r\n        public static put(sendPackage:JTSendPackage):void\r\n        {\r\n            this.pool.put(sendPackage as JTIPoolObject);\r\n        }\r\n    }\r\n}\r\n"]}