{"version":3,"sources":["assets\\Script\\src\\network\\JTChannel.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;IAAA,IAAU,GAAG,CAmEZ;IAnED,WAAU,GAAG;QAET;YAAwC,6BAAiB;YAWrD,mBAAY,GAAO;gBAAnB,YAEI,iBAAO,SAOV;gBAlBS,UAAI,GAAO,IAAI,CAAC;gBAChB,WAAK,GAAU,CAAC,CAAC;gBACjB,WAAK,GAAU,IAAI,CAAC;gBACpB,cAAQ,GAAO,IAAI,CAAC;gBAEpB,eAAS,GAAsB,IAAI,CAAC;gBACpC,cAAQ,GAAqB,IAAI,CAAC;gBAClC,cAAQ,GAAqB,IAAI,CAAC;gBAMxC,IAAI,GAAG;oBAAC,KAAI,CAAC,IAAI,GAAG,GAAG,CAAC;qBAExB;oBACI,KAAI,CAAC,IAAI,GAAG,KAAI,YAAY,kBAAkB,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,aAAa,CAAC;iBAChF;;YACL,CAAC;YAMM,0BAAM,GAAb,UAAc,IAAW,EAAE,IAAW;gBAElC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;gBAClB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;YACtB,CAAC;YAEM,2BAAO,GAAd;gBAEI,IAAI,IAAI,CAAC,QAAQ;oBAAE,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC;;oBACpC,IAAI,CAAC,QAAQ,GAAG,IAAI,IAAI,CAAC,IAAI,EAAE,CAAC;gBACrC,OAAO,IAAI,CAAC,QAAQ,CAAC;YACzB,CAAC;YAEM,0BAAM,GAAb;gBAEI,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,gBAAgB,CAAC,MAAM,CAAsB,CAAC;gBACxF,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,gBAAgB,CAAC,MAAM,CAAsB,CAAC;YAC5F,CAAC;YAEM,wBAAI,GAAX,UAAY,eAAkC;gBAE1C,IAAI,CAAC,SAAS,GAAG,eAAe,CAAC;YACrC,CAAC;YAED,sBAAW,+BAAQ;qBAAnB;oBAEI,OAAO,IAAI,CAAC,SAAS,CAAA;gBACzB,CAAC;;;eAAA;YAED,sBAAW,2BAAI;qBAAf;oBAEI,OAAO,IAAI,CAAC,KAAK,CAAC;gBACtB,CAAC;;;eAAA;YAED,sBAAW,2BAAI;qBAAf;oBAEI,OAAO,IAAI,CAAC,KAAK,CAAC;gBACtB,CAAC;;;eAAA;YACL,gBAAC;QAAD,CAhEA,AAgEC,CAhEuC,iBAAiB,GAgExD;QAhEqB,aAAS,YAgE9B,CAAA;IACL,CAAC,EAnES,GAAG,KAAH,GAAG,QAmEZ","file":"","sourceRoot":"/","sourcesContent":["namespace com \r\n{\r\n    export abstract class JTChannel extends JTEventDispatcher implements JTIChannel\r\n    {\r\n        protected _cls:any = null;\r\n        protected _port:number = 0;\r\n        protected _host:string = null;\r\n        protected _channel:any = null;\r\n\r\n        protected _pipeline:JTIChannelPipeline = null;\r\n        protected _encoder:JTIEncoderAdapter = null;\r\n        protected _decoder:JTIDecoderAdapter = null;\r\n\r\n        constructor(cls:any)\r\n        {\r\n            super();\r\n\r\n            if (cls)this._cls = cls;\r\n            else\r\n            {\r\n                this._cls = this instanceof JTWebSocketChannel ? JTWebSocket : JTHttpRequest;\r\n            }\r\n        }\r\n\r\n        abstract flush():void\r\n\r\n        abstract send(data:any):void \r\n\r\n        public config(host:string, port:number):void\r\n        {\r\n            this._host = host;\r\n            this._port = port;\r\n        }\r\n\r\n        public connect():any\r\n        {\r\n            if (this._channel) this._channel.clean();\r\n            else this._channel = new this._cls();\r\n            return this._channel;\r\n        }\r\n\r\n        public reload():void \r\n        {\r\n            this._encoder = this._pipeline.getContext(JTChannelContext.ENCODE) as JTIEncoderAdapter;\r\n            this._decoder = this._pipeline.getContext(JTChannelContext.DECODE) as JTIDecoderAdapter;\r\n        }\r\n\r\n        public bind(channelPipeline:JTIChannelPipeline):void\r\n        {\r\n            this._pipeline = channelPipeline;\r\n        }\r\n\r\n        public get pipeline():JTIChannelPipeline\r\n        {\r\n            return this._pipeline\r\n        }\r\n\r\n        public get host():string\r\n        {\r\n            return this._host;\r\n        }\r\n\r\n        public get port():number\r\n        {\r\n            return this._port;\r\n        }\r\n    }\r\n}\r\n"]}