{"version":3,"sources":["assets\\Script\\src\\layout\\JTLayoutManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["namespace com \r\n{\r\n    export class JTLayoutManager extends JTApplicationContext\r\n    {\r\n\r\n        public static ___classLayoutMap:{[className:string] : {[name:string]:JTLayout}} = {}\r\n        private _stage:fgui.GRoot = null;\r\n        public static currentLayout:string = null;\r\n\r\n        constructor()\r\n        {\r\n            super();\r\n        }\r\n\r\n        public static addLayout(__className:string, property:string, __layout:string):void\r\n        {\r\n            let __layoutMap:{[name:string]:JTLayout} = this.___classLayoutMap[__className];\r\n            if (!__layoutMap)\r\n            {\r\n                    this.___classLayoutMap[__className] = __layoutMap = {};\r\n            }\r\n            let layout:JTLayout = __layoutMap[property];\r\n            if (layout) return;\r\n            layout = new JTLayout(__className, property, __layout);\r\n            __layoutMap[property] = layout;\r\n        }\r\n\r\n        public static update(view:JTIComponent):void\r\n        {\r\n            let className:string = view.className;\r\n            let __layoutMap:{[name:string]:JTLayout} = this.___classLayoutMap[className];\r\n            if (!__layoutMap) \r\n            {\r\n                JTLayoutManager.layoutUpdate(view.componentUI, JTLayout.LAYOUT_VERTICAL);\r\n                return;\r\n            }\r\n            for (var key in __layoutMap)\r\n            {\r\n                let layout:JTLayout = __layoutMap[key];\r\n                if (key == \"layout\") \r\n                {\r\n                    if (view instanceof JTUIComponent)   layout.update(view);\r\n                    else \r\n                    {\r\n                        layout.update(view.componentUI)\r\n                    }\r\n                }\r\n                else\r\n                {\r\n                    layout.update(view.componentUI[layout.__property])\r\n                }\r\n            }\r\n        }\r\n\r\n        public static getLayout(___className:string, property?:string):JTLayout\r\n        {\r\n            let __layoutMap:{[name:string]:JTLayout} = this.___classLayoutMap[___className];\r\n            if (__layoutMap)\r\n            {\r\n                if (!property) property = \"layout\";\r\n                return __layoutMap[property];\r\n            }\r\n            return null;\r\n        }\r\n\r\n        \r\n        public static layoutUpdate(child:fgui.GComponent, layout:string):void\r\n        {\r\n             switch(layout)\r\n             {\r\n                case JTLayout.LAYOUT_VERTICAL:\r\n                {\r\n                    JTLayoutManager.layoutVertical(child);\r\n                    break;\r\n                }\r\n                case JTLayout.LAYOUT_HORIZONTAL:\r\n                {\r\n                    JTLayoutManager.layoutHorzontal(child);\r\n                    break;\r\n                }\r\n                case JTLayout.LAYOUT_AUTO_SWITCH:\r\n                {\r\n                    JTLayoutManager.autoAdjustLayout(child);\r\n                    break;\r\n                }\r\n             }\r\n        }\r\n\r\n        public static layoutVertical(child:fgui.GComponent):void\r\n        {\r\n            let parent:fgui.GComponent = child.findParent() as fgui.GComponent;\r\n            if (!parent) return;\r\n            child.setSize(parent.width, parent.height);\r\n            child.addRelation(parent, fgui.RelationType.Height);\r\n        }\r\n\r\n        public static layoutHorzontal(child:fgui.GComponent):void\r\n        {\r\n            let parent:fgui.GComponent = child.findParent() as fgui.GComponent;\r\n            if (!parent) return;\r\n            child.setSize(parent.width, parent.height);\r\n            child.addRelation(parent, fgui.RelationType.Width);\r\n        }\r\n\r\n        public static autoAdjustLayout(child:fgui.GComponent):void\r\n        {\r\n            let parent:fgui.GComponent = child.findParent() as fgui.GComponent;\r\n            if (!parent) return;\r\n            child.setSize(parent.width, parent.height);\r\n            child.addRelation(parent, fgui.RelationType.Size);\r\n        }\r\n\r\n        public build():void \r\n        {\r\n            this._stage = JTSession.stage;\r\n            this.registerWindowResize();\r\n        }\r\n\r\n        protected registerWindowResize():void\r\n        {\r\n            window.addEventListener(\"resize\", this.onResize.bind(this));\r\n        }\r\n\r\n        protected onResize(e):void\r\n        {\r\n            this.update();\r\n            dispatchEvent(JTResizeEvent.RESIZE);\r\n        }\r\n\r\n        protected update():void\r\n        {\r\n            JTSession.stageWidth = this._stage.width;\r\n            JTSession.stageHeight = this._stage.height;\r\n        }\r\n\r\n        public buildComplete():void \r\n        {\r\n           \r\n        }\r\n        \r\n    }\r\n}"]}