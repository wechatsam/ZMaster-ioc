{"version":3,"sources":["assets\\Script\\src\\pools\\JTFixedPool.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;IAIC,IAAU,GAAG,CA6EZ;IA7ED,WAAU,GAAG;QAEV;YAA0D,+BAAc;YAIpE,qBAAY,GAAO,EAAE,UAAuB;gBAAvB,2BAAA,EAAA,gBAAuB;gBAA5C,YAEI,kBAAM,GAAG,CAAC,SAEb;gBANO,iBAAW,GAAU,CAAC,CAAC;gBAK3B,KAAI,CAAC,UAAU,GAAG,UAAU,CAAC;;YACjC,CAAC;YAED,sBAAW,mCAAU;qBAArB,UAAsB,KAAY;oBAE9B,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;oBACtC,IAAI,CAAC,MAAM,EAAE,CAAC;gBAClB,CAAC;;;eAAA;YAES,4BAAM,GAAhB;gBAEI,IAAI,IAAI,GAAO,IAAI,CAAC,KAAK,CAAC;gBAC1B,IAAI,KAAK,GAAU,CAAC,CAAC;gBACrB,IAAI,KAAK,GAAO,EAAE,CAAC;gBACnB,OAAM,IAAI,CAAC,MAAM,EACjB;oBACI,IAAI,IAAI,GAAK,IAAI,CAAC,KAAK,EAAE,CAAC;oBAC1B,IAAI,IAAI,CAAC,WAAW,GAAG,KAAK,EAC5B;wBACI,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;wBACjB,KAAK,EAAG,CAAC;qBACZ;;wBACI,IAAI,GAAG,IAAI,CAAC;iBACpB;gBACD,IAAI,IAAI,CAAC,WAAW,GAAG,KAAK,EAC5B;oBACI,IAAI,IAAI,GAAU,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;oBAC3C,IAAI,GAAG,GAAO,IAAI,CAAC,IAAI,CAAC;oBACxB,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAA;oBACzB,KAAK,IAAI,CAAC,GAAU,CAAC,EAAE,CAAC,GAAG,IAAI,EAAE,CAAC,EAAE,EACpC;wBACI,IAAI,IAAI,GAAK,IAAI,GAAG,EAAE,CAAC;wBACvB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;qBACnB;iBACJ;gBACD,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;YAC7B,CAAC;YAEM,yBAAG,GAAV;gBAEI,IAAI,IAAI,CAAC,KAAK,GAAG,CAAC,EAClB;oBACI,IAAI,CAAC,KAAK,EAAG,CAAC;oBACd,OAAO,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;iBAC7B;gBACD,IAAI,CAAC,MAAM,EAAE,CAAC;gBACd,OAAO,IAAI,CAAC,GAAG,EAAE,CAAC;YACtB,CAAC;YAMD,sBAAW,iCAAQ;qBAAnB;oBAEI,OAAO,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,KAAK,CAAC;gBAC1C,CAAC;;;eAAA;YAEa,oBAAQ,GAAtB,UAAuB,GAAO,EAAE,UAAuB;gBAAvB,2BAAA,EAAA,gBAAuB;gBAEnD,IAAI,IAAI,GAAgB,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;gBAChD,IAAI,CAAC,IAAI,EACT;oBACI,IAAI,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,GAAG,IAAI,WAAW,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;iBACrE;gBACD,OAAO,IAAI,CAAC;YAChB,CAAC;YAtEgB,yBAAa,GAAU,EAAE,CAAC;YAuE/C,kBAAC;SA1ED,AA0EC,CA1EyD,WAAW,GA0EpE;QA1EY,eAAW,cA0EvB,CAAA;IACJ,CAAC,EA7ES,GAAG,KAAH,GAAG,QA6EZ","file":"","sourceRoot":"/","sourcesContent":["///<reference path=\"JTPool.ts\"/>\r\n/**\r\n * \r\n */\r\n namespace com \r\n {\r\n    export class JTFixedPool<T extends JTIPoolObject> extends JTCachePool<T>\r\n    {\r\n        private _fixedCount:number = 0;\r\n        protected static _fixedPoolMap:Object = {};\r\n        constructor(cls:any, fixedCount:number = 100)\r\n        {\r\n            super(cls);\r\n            this.fixedCount = fixedCount;\r\n        }\r\n\r\n        public set fixedCount(value:number)\r\n        {\r\n            this._size = this._fixedCount = value;\r\n            this.create();\r\n        }\r\n\r\n        protected create():void\r\n        {\r\n            var list:T[] = this._list;\r\n            var count:number = 0;\r\n            var lines:T[] = [];\r\n            while(list.length)//检查以前的池对象并重新放入临时对列里\r\n            {\r\n                var item:T = list.shift();\r\n                if (this._fixedCount > count)\r\n                {\r\n                    lines.push(item);\r\n                    count ++;\r\n                }\r\n                else item = null;\r\n            }\r\n            if (this._fixedCount > count)//二次判断当前池里的对象是否满足预设的个数\r\n            {\r\n                var leng:number = this._fixedCount - count;\r\n                var cls:any = this._cls;\r\n                list = list.concat(lines)\r\n                for (var i:number = 0; i < leng; i++)\r\n                {\r\n                    var item:T = new cls();\r\n                    list.push(item);\r\n                }\r\n            }\r\n            this._size = list.length;\r\n        }\r\n\r\n        public get():T\r\n        {\r\n            if (this._size > 0)\r\n            {\r\n                this._size --;\r\n                return this._list.shift();\r\n            }\r\n            this.create();\r\n            return this.get();\r\n        }\r\n\r\n\r\n        /***\r\n         * 检查池是否满了，如果满了，对象池则不会创建对象。\r\n         * */\r\n        public get fullPool():boolean\r\n        {\r\n            return this._fixedCount == this._size;\r\n        }\r\n\r\n        public static instance(cls:any, fixedCount:number = 100):JTIFixedPool \r\n        {\r\n            var pool:JTIFixedPool = this._fixedPoolMap[cls];\r\n            if (!pool)\r\n            {\r\n                pool = this._fixedPoolMap[cls] = new JTFixedPool(cls, fixedCount);\r\n            }\r\n            return pool;\r\n        }\r\n    }\r\n }\r\n"]}