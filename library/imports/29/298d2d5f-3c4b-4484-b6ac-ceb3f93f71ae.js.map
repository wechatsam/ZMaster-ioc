{"version":3,"sources":["assets\\Script\\src\\network\\JTChannelPipeline.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;IAAC,IAAU,GAAG,CA4Eb;IA5EA,WAAU,GAAG;QAEV;YAAuC,qCAAiB;YAKpD;gBAAA,YAEI,iBAAO,SACV;gBANO,cAAQ,GAAc,IAAI,CAAC;gBAC3B,kBAAY,GAAsC,EAAE,CAAC;gBACrD,aAAO,GAAuB,EAAE,CAAA;;YAIxC,CAAC;YAEM,yCAAa,GAApB;gBAEI,KAAK,IAAI,CAAC,GAAU,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EACnD;oBACI,IAAI,IAAI,GAAqB,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;oBAC7C,IAAI,CAAC,aAAa,EAAE,CAAC;iBACxB;YACT,CAAC;YAEU,2CAAe,GAAtB;gBAEI,KAAK,IAAI,CAAC,GAAU,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EACnD;oBACI,IAAI,IAAI,GAAqB,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;oBAC7C,IAAI,CAAC,eAAe,EAAE,CAAC;iBAC1B;YACL,CAAC;YAOM,gCAAI,GAAX,UAAY,OAAkB;gBAE1B,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;gBACxB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gBACzB,SAAS,CAAC,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC;gBAClC,OAAO,IAAI,CAAC,QAAQ,CAAC;YACzB,CAAC;YAQM,uCAAW,GAAlB,UAAmB,IAAW,EAAE,IAAsB;gBAElD,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gBAChB,IAAI,CAAC,KAAK,EAAE,CAAC;gBACb,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,GAAI,IAAI,CAAC;gBAChC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gBACxB,OAAO,IAAI,CAAC;YAChB,CAAC;YAEM,sCAAU,GAAjB,UAAkB,IAAW;gBAEzB,OAAO,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;YACnC,CAAC;YAEM,kCAAM,GAAb,UAAc,IAAW,EAAE,IAAW;gBAElC,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;gBACvB,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;gBACjC,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;gBACxB,OAAO,IAAI,CAAC,QAAQ,CAAC;YACzB,CAAC;YAED,sBAAW,sCAAO;qBAAlB;oBAEI,OAAO,IAAI,CAAC,QAAQ,CAAC;gBACzB,CAAC;;;eAAA;YACL,wBAAC;QAAD,CAzEA,AAyEC,CAzEsC,iBAAiB,GAyEvD;QAzEY,qBAAiB,oBAyE7B,CAAA;IACL,CAAC,EA5EU,GAAG,KAAH,GAAG,QA4Eb","file":"","sourceRoot":"/","sourcesContent":[" namespace com \r\n{\r\n    export class JTChannelPipeline extends JTEventDispatcher implements JTIChannelPipeline\r\n    {\r\n        private _channel:JTIChannel = null;\r\n        private __contextMap:{[type:string]: JTIChannelContext} = {};\r\n        private ___ctxs:JTIChannelContext[] = []\r\n        constructor()\r\n        {\r\n            super();\r\n        }\r\n\r\n        public channelActive():void\r\n        {\r\n            for (let i:number = 0; i < this.___ctxs.length; i++)\r\n            {\r\n                let ___c:JTIChannelContext = this.___ctxs[i];\r\n                ___c.channelActive();\r\n            }\r\n    }\r\n\r\n        public channelInactive():void\r\n        {\r\n            for (let i:number = 0; i < this.___ctxs.length; i++)\r\n            {\r\n                let ___c:JTIChannelContext = this.___ctxs[i];\r\n                ___c.channelInactive();\r\n            }\r\n        }\r\n\r\n        /**\r\n         * \r\n         * @param channel \r\n         * @returns \r\n         */\r\n        public bind(channel:JTIChannel):JTIChannel\r\n        {\r\n            this._channel = channel;\r\n            this._channel.bind(this);\r\n            JTSession.channel = this._channel;\r\n            return this._channel;\r\n        }\r\n\r\n        /**\r\n         * \r\n         * @param type \r\n         * @param ___c \r\n         * @returns \r\n         */\r\n        public childOption(type:string, ___c:JTIChannelContext):JTChannelPipeline\r\n        {\r\n            ___c.bind(this);\r\n            ___c.build();\r\n            this.__contextMap[type] =  ___c;\r\n            this.___ctxs.push(___c);\r\n            return this;\r\n        }\r\n\r\n        public getContext(type:string):JTIChannelContext\r\n        {\r\n            return this.__contextMap[type];\r\n        }\r\n\r\n        public launch(host:string, port:number):JTIChannel\r\n        {\r\n            this._channel.reload();\r\n            this._channel.config(host, port);\r\n            this._channel.connect();\r\n            return this._channel;\r\n        }\r\n\r\n        public get channel():JTIChannel\r\n        {\r\n            return this._channel;\r\n        }\r\n    }\r\n}"]}