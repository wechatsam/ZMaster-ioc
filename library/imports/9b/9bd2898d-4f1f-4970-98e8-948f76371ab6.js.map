{"version":3,"sources":["assets\\Script\\src\\base\\JTUIComponent.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":[" \r\nnamespace com\r\n{\r\n   export class JTUIComponent<T extends fgui.GComponent> extends fgui.GComponent implements JTIComponent\r\n   {\r\n        protected _componentId:string = null;\r\n        protected ____ui:T = null;\r\n        protected _url:string = null;\r\n        protected __runClass:any = null;\r\n        protected __loaded:boolean = false;\r\n        protected _signaler:JTEventSignaler = null;\r\n        protected __uiPackage:fgui.UIPackage = null;\r\n        protected _registeredClick:boolean = false;\r\n        protected ___owner:JTIScene = null;\r\n        public constructor()\r\n        {\r\n                super();\r\n                this._signaler = JTEventSignaler.create();\r\n        }\r\n\r\n        public get uiPackage():fgui.UIPackage\r\n        {\r\n                return this.__uiPackage\r\n        }\r\n\r\n        public get runClass():any\r\n        {\r\n                return this.__runClass;\r\n        }\r\n\r\n        /**\r\n         * 场景中的一些小界面\r\n         * @param url \r\n         * @param __id \r\n         * @param registeredClick \r\n         * @param runClass \r\n         * @returns \r\n         */\r\n        protected loadAsset(url:string, __id:string, registeredClick:boolean = true, runClass?:any):void\r\n        {\r\n                if (this._url == url && url != null)\r\n                {\r\n                    info(\"asset already loaded\");\r\n                    return;\r\n                }\r\n                this.__loaded = false;\r\n                this._url = url;\r\n                this._componentId = __id;\r\n                this.__runClass = runClass;\r\n                this._registeredClick = registeredClick;\r\n                this.__uiPackage = fgui.UIPackage.getByName(url);\r\n                if (!this.__uiPackage)   this.load();\r\n                else\r\n                {\r\n                    this.loadAssetComplete();\r\n                }\r\n        }\r\n    \r\n        public load():void\r\n        {\r\n                fgui.UIPackage.loadPackage(this._url, this.loadAssetComplete.bind(this));\r\n        }\r\n\r\n        public setup(owner:JTIScene, __id:string, registeredClick:boolean = true, runClass?:any):void\r\n        {\r\n                this._componentId = __id;\r\n                this.__runClass = runClass;\r\n                this.___owner = owner;\r\n                this.__uiPackage = this.___owner.uiPackage\r\n                this._registeredClick = registeredClick;\r\n                this.__runClass && this.__runClass.bindAll();\r\n                this.buildingUI();\r\n        }\r\n\r\n        protected buildingUI():void\r\n        {\r\n                this.____ui = this.__uiPackage.createObject(this._componentId) as T;\r\n                this.on(fgui.Event.UNDISPLAY, this.onRemoveFromeStage, this);\r\n                if (this._registeredClick)  this.____ui.onClick(this.registerMouseClick, this);\r\n                this.bindUIRelation(this, fgui.RelationType.Height);\r\n                this.addChild(this.____ui);\r\n                JTResizeEvent.registerResize(this);\r\n                this.notifyComplete();\r\n        }\r\n\r\n        public bindUIRelation(parent:fgui.GComponent, type:number):void\r\n        {\r\n                this.bindRelation(this.____ui, parent, type);\r\n        }\r\n\r\n        public bindRelation(child:fgui.GComponent, parent:fgui.GComponent, type:number):void\r\n        {\r\n                child.setSize(parent.width, parent.height);\r\n                child.addRelation(parent, type);\r\n        }\r\n\r\n        protected loadAssetComplete():void\r\n        {\r\n               this.__loaded = true;\r\n               this.__runClass && this.__runClass.bindAll(); \r\n               this.__uiPackage = fgui.UIPackage.addPackage(this._url);\r\n               this.buildingUI();\r\n        }\r\n\r\n        protected notifyComplete():void\r\n        {\r\n          \r\n        }\r\n\r\n        protected registerMouseClick(e):void\r\n        {\r\n            var target: fgui.GComponent = e.target[\"$gobj\"]; //cocos 是$gobj Laya是$owner\r\n            var targetName: string = target.name;\r\n            if (!targetName) return;\r\n            this.onMouseClickHandler(target, targetName);\r\n        }\r\n    \r\n        protected onMouseClickHandler(target:fairygui.GComponent, targetName:string):void\r\n        {\r\n    \r\n        }\r\n\r\n        public onResizeHandler():void\r\n        {\r\n        //     if (!this.____ui) return;\r\n        //     JTLayoutManager.update(this);\r\n        }\r\n\r\n        protected onRemoveFromeStage(e):void\r\n        {\r\n                this.off(fgui.Event.UNDISPLAY, this.onRemoveFromeStage, this);\r\n                this.removeChildren();\r\n                this._signaler && JTEventSignaler.put(this._signaler);\r\n                this.___owner = this._signaler = this.__runClass = this.____ui = this.__uiPackage = null;\r\n        }\r\n\r\n        public get componentUI():T\r\n        {\r\n                return this.____ui\r\n        }\r\n\r\n        recycle() \r\n        {\r\n                this._signaler.recycle();\r\n        }\r\n\r\n        public get className():string\r\n        {\r\n            return this.constructor[\"name\"];\r\n        }\r\n\r\n\r\n        public addEventListener(key:any, method:Function, caller:any, once?:boolean):void\r\n        {\r\n                this._signaler.addEventListener(key, method, caller, once);\r\n        }\r\n\r\n        public dispatchEvent(key:any, args?:any):void\r\n        {\r\n                this._signaler.dispatchEvent(key, args);\r\n        }\r\n\r\n        public removeEventListener(key:any, method:Function, caller:any):void\r\n        {\r\n                this._signaler.removeEventListener(key, method, caller);\r\n        }\r\n\r\n        public removeEvents() \r\n        {\r\n                this._signaler.removeEvents();\r\n        }\r\n\r\n        public registerFunction(key:any, method:Function, caller:any, once?:boolean):void\r\n        {\r\n                this._signaler.registerFunction(key, method, caller, once);\r\n        }\r\n\r\n        public execute(key:any, args?:any):void\r\n        {\r\n                this._signaler.execute(key, args);\r\n        }\r\n\r\n        public removeFunction(key:any, method:Function, caller:any):void\r\n        {\r\n                this._signaler.removeFunction(key, method, caller);\r\n        }\r\n\r\n        public removeFunctions() \r\n        {\r\n                this._signaler.removeFunctions(); \r\n        }\r\n\r\n    }\r\n        \r\n}\r\n"]}